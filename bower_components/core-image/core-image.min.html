 <link rel="import" href="../polymer/polymer.html"> <polymer-element name="core-image"> <template> <link rel="stylesheet" href="core-image.css"> <template if="{{!sizing}}"> <img id="img"> </template> <template if="{{preload && fade}}"> <div id="placeholder" fit></div> </template> <content></content> </template> <script>Polymer({publish:{src:null,load:!0,sizing:null,position:"center",preload:!1,placeholder:null,fade:!1,loading:!1,width:null,height:null},observe:{"preload color sizing position src fade":"update"},widthChanged:function(){this.style.width=isNaN(this.width)?this.width:this.width+"px"},heightChanged:function(){this.style.height=isNaN(this.height)?this.height:this.height+"px"},update:function(){if(this.style.backgroundSize=this.sizing,this.style.backgroundPosition=this.sizing?this.position:null,this.style.backgroundRepeat=this.sizing?"no-repeat":null,this.preload){if(this.fade?(this._placeholderEl||(this._placeholderEl=this.shadowRoot.querySelector("#placeholder")),this._placeholderEl.style.backgroundSize=this.sizing,this._placeholderEl.style.backgroundPosition=this.sizing?this.position:null,this._placeholderEl.style.backgroundRepeat=this.sizing?"no-repeat":null,this._placeholderEl.classList.remove("fadein"),this._placeholderEl.style.backgroundImage=this.load&&this.placeholder?"url("+this.placeholder+")":null):this._setSrc(this.placeholder),this.load&&this.src){var i=new Image;i.src=this.src,this.loading=!0,i.onload=function(){this._setSrc(this.src),this.loading=!1,this.fade&&this._placeholderEl.classList.add("fadein")}.bind(this)}}else this._setSrc(this.src)},_setSrc:function(i){this.sizing?this.style.backgroundImage=i?"url("+i+")":"":this.$.img.src=i||""}});</script></polymer-element>